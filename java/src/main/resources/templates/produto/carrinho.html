<html lang='pt-br'>
    <head>
        <meta charset='UTF-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
        <link th:href="@{/css/stylesheet.css}" rel="stylesheet" />


        <title>Lexian - Principal</title>
    </head>
    <body>

        <header>
            <div id='bottons_up'>
                <div id='login_and_register'>
                    <button id='login_button' class='header_bottons'>LOGIN</button >
                    <button id='register_botton' class='header_bottons'>REGISTRE-SE</button>
                </div>
                <div id='shopping-carts'>
                    <button id='shopping-carts_botton' class='header_bottons'>CARRINHO</button>
                </div>
            </div>
            <div id='search'>

                <label for="search_input">LEXIAN</label>

                <input type="text" placeholder="" id='search_input'>  

                <div id='search_button'>
                    <img src="images/search_button.png" alt="">
                </div>      

            </div>
        </header>

        <div id='content'>
            <div id='added-products'>
                <div id='added-header'>
                    <label> Produtos Adicionados ao Carrinho</label>  
                </div>
            </div>

            <div id='added-cart-product'>
                <form action="/carrinho/atualizar" method="POST" th:each="produto, stat: ${session['carrinho']}"  th:id="|form${produto.idProduto}|">
                    <div id='added-cart-product-content'>
                        <div id='added-cart-product-info'>
                            <div id='added-cart-product-info-img'>
                                <img th:src="${produto.imagem}">
                            </div>
                            <div id='added-cart-product-info-content'>
                                <label th:text="${produto.nomeProduto}"></label><br><br>
                                <label th:text="${produto.valor}"></label><br>    
                            </div>
                        </div>  
            
                                        <div id='added-cart-product-amost'>
                            <label>Quantidade</label><br><br>
                            
                            <input type="number" name="qtde_produto" th:id="|quant${produto.idProduto}|" min="0"  th:value="${produto.qtde}"  onchange="this.form.submit()"> 
                            <input type="hidden" name="id_produto" th:value="${produto.idProduto}">

                            
                        </div>
                        <div id='added-cart-product-total'>
                            <label>Total (รก vista)</label><br>
                            <label th:text="|R$ ${produto.valor * produto.qtde} |"></label><br>

                            <button th:onclick="|removerProduto(${produto.idProduto})|">X</button>
                            
                            
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </body>
    
    <script>
        
    function removerProduto(id){
        
        var confirmacao = confirm("Produto Removido !");
        
        if(confirmacao == true){
             document.getElementById("quant"+id).value = 0;
            document.getElementById("form"+id).submit();
        }
       
    }
        
    </script>
    
    
</html>