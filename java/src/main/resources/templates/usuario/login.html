<html lang='pt-br'>

    <head>
        <meta charset='UTF-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
        <link th:href="@{/css/stylesheet.css}" rel="stylesheet"/>
        <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
        <script src="http://localhost:8080/js/jquery.mask.min.js"></script>
        <script src="http://jqueryvalidation.org/files/dist/jquery.validate.js"></script>


        <title>Lexian - Principal</title>
    </head>

    <body>

        <header>
            <div id='bottons_up'>
                <div id='login_and_register'>
                    <button id='login_button' class='header_bottons'>LOGIN</button>
                    <button id='register_botton' class='header_bottons'>REGISTRE-SE</button>
                </div>
                <div id='shopping-carts'>
                    <button id='shopping-carts_botton' class='header_bottons'>CARRINHO</button>
                </div>
            </div>
            <div id='search'>

                <label for="search_input">LEXIAN</label>

                <input type="text" placeholder="" id='search_input'>

                <div id='search_button'>
                    <img src="images/search_button.png" alt="">
                </div>

            </div>
        </header>

        <div id='content'>
            <div id='login-user'>
                <div id='login-user-header'>
                    <label> Seu Cadastro </label>
                </div>
            </div>
            <div id='field-login'>

                <div id='access-user'>
                    <div id='access-user-header'>
                        <label>Já é cadastrado?</label><br>
                        <label>Realize o login abaixo. </label>
                    </div>

                    <div id='access-user-content'>
                        <form id="formLogin" action="cliente/login" method="POST" enctype="multipart/form-data" >
                            <div id='access-user-content-header'>
                                <label>Dados Pessoais:</label>
                            </div>
                            <div id='access-user-content-email-div'>
                                <label for='access-user-content-email'>Email: </label><br>
                                <input type="text" id='access-user-content-email' name='email'>
                            </div>
                            <div id='access-user-content-passw-div'>
                                <label for='access-user-content-passw'>Senha: </label><br>
                                <input type="password" id='access-user-content-passw' name='senha'>
                            </div>
                            <button type="submit" id='access-user-content-button'>Entrar</button>

                            <div id='access-user-content-remember-div'>
                                <a href=""><text id='access-user-content-remember-login'>Esqueci meu Login</text></a>
                                <a href=""><text id='access-user-content-remember-passw'>Esqueci minha senha</text></a>
                            </div>    
                        </form>


                    </div>
                </div>

                <div id='register-user'>
                    <form id="formCadastrar" action="cliente/cadastrar" method="POST" enctype="multipart/form-data">
                        <input type="hidden" id="mensagem_retorno" th:if="${msgSucesso != null}" th:value="${msgSucesso}">

                        <div id='register-user-header'>
                            <label>Ainda não é cadastrado?</label><br>
                            <label>Realize agora mesmo, é simples e rápido!</label>
                        </div>
                        <div id='register-user-content'>
                            <div id='register-user-content-header'>
                                <label>Dados Pessoais:</label>
                            </div>
                            <div id='register-user-content-name-div'>
                                <label for='register-user-content-name'>Nome: </label><br>
                                <input type="text" id='register-user-content-name' name='nome_usuario'>
                            </div>
                            <div id='register-user-content-email-div'>
                                <label for='register-user-content-email'>Email: </label><br>
                                <input type="text" id='register-user-content-email' name='email_usuario'>
                            </div>
                            <div id='register-user-content-cpf-div'>
                                <label for='register-user-content-cpf'>CPF: </label><br>
                                <input type="text" id='register-user-content-cpf' name='cpf_usuario'>
                            </div>
                            <div id='register-user-content-passw-all'>
                                <div id='register-user-content-passw-div'>
                                    <label for='register-user-content-passw'>Senha: </label><br>
                                    <input type="password" id='register-user-content-passw' name='senha_usuario'>
                                </div>
                                <div id='register-user-content-passw-confirm-div'>
                                    <label for='register-user-content-passw-confirm' >Confirmar Senha: </label><br>
                                    <input type="password" id='register-user-content-passw-confirm' name='confirmaSenha_usuario'>
                                </div>
                            </div>
                            <div id='register-revenues-address-label'>
                                <label>Endereço de Faturamento</label>
                            </div>
                            <div id='register-revenues-address-div'>
                                <div id='verify-revenues-choice-div'>
                                    <div>
                                        <label>Deseja que o endereço de faturamento seja o mesmo da entrega?</label><br>
                                        Sim<input type ='radio' value='1' name='verify-revenues-choice'>
                                        Não<input type ='radio' value='0' name='verify-revenues-choice' checked>
                                    </div>
                                </div>

                                <div id='register-user-content-address'>
                                    <div id='register-user-content-street-div'>
                                        <label for='register-user-content-street'>Rua: </label><br>
                                        <input type="text" id='register-user-content-street' name='rua'>
                                    </div>
                                    <div id='register-user-content-number-div'>
                                        <label for='register-user-content-number'>N°: </label><br>
                                        <input type="number" id='register-user-content-number' name='numero'>
                                    </div>
                                </div>

                                <div id='register-user-content-neighborhood-div'>
                                    <label for='register-user-content-neighborhood'>Bairro: </label><br>
                                    <input type="text" id='register-user-content-neighborhood' name='bairro'>
                                </div>
                                <div id='register-user-content-complement-div'>
                                    <label for='register-user-content-complement'>Complemento: </label><br>
                                    <input type="text" id='register-user-content-complement' name='complemento'>
                                </div>
                                <div id='register-user-content-zip-div'>
                                    <label for='register-user-content-zip'>CEP: </label><br>
                                    <input type="text" id='register-user-content-zip' name='cep'>
                                </div>    
                            </div>
                            
                            <div id='register-revenues-address-label'>
                                <label>Endereço de Entrega</label>
                            </div>
                            <div id='register-revenues-address-div'>
                                <div id='register-user-content-address'>
                                    <div id='register-user-content-street-div'>
                                        <label for='register-user-content-street-entrega'>Rua: </label><br>
                                        <input type="text" id='register-user-content-street-entrega' name='rua_entrega'>
                                    </div>
                                    <div id='register-user-content-number-div'>
                                        <label for='register-user-content-number'>N°: </label><br>
                                        <input type="text" id='register-user-content-number' name='numero_entrega'>
                                    </div>
                                </div>

                                <div id='register-user-content-neighborhood-div'>
                                    <label for='register-user-content-neighborhood-entrega'>Bairro: </label><br>
                                    <input type="text" id='register-user-content-neighborhood-entrega' name='bairro_entrega'>
                                </div>
                                <div id='register-user-content-complement-div'>
                                    <label for='register-user-content-complement'>Complemento: </label><br>
                                    <input type="text" id='register-user-content-complement' name='complemento_entrega'>
                                </div>
                                <div id='register-user-content-zip-div'>
                                    <label for='register-user-content-zip-entrega'>CEP: </label><br>
                                    <input type="text" id='register-user-content-zip-entrega' name='cep_entrega'>
                                </div>    
                            </div>
                            <input type="submit" id='register-user-content-button' value="Cadastrar"></input>

                        </div>
                    </form>
                </div>
            </div>


        </div>
    </body>

    <script>
        /*function verifyForm() {
         var noneNeigh = document.getElementById("register-user-content-neighborhood-div").style.display
         console.log(noneNeigh)
         if (noneNeigh = "none") {
         displayNoneRegister(true)
         return false
         }
         }*/

        function displayNoneRegister(x) {
            if (!x) {
                document.getElementById("register-user-content-passw-all").style.display = "none"
                document.getElementById("register-user-content-address").style.display = "none"
                document.getElementById("register-user-content-neighborhood-div").style.display = "none"
                document.getElementById("register-user-content-complement-div").style.display = "none"
                document.getElementById("register-user-content-zip-div").style.display = "none"
            } else {
                document.getElementById("register-user-content-passw-all").style.display = "flex"
                document.getElementById("register-user-content-address").style.display = "flex"
                document.getElementById("register-user-content-neighborhood-div").style.display = "block"
                document.getElementById("register-user-content-complement-div").style.display = "block"
                document.getElementById("register-user-content-zip-div").style.display = "block"
            }

        }

        function verificaRetorno() {
            const verify = 1
            //const verify = document.getElementById("mensagem_retorno").value;
                
            if (verify == "Cadastrado") {
                alert("Usúario cadastrado com sucesso! Realize o login abaixo. ")
            }

        }

        $('#register-user-content-cpf').mask('000.000.000-00', {reverse: true});
        $('#register-user-content-zip').mask('00000-000', {reverse: true});
        $('#register-user-content-zip-entrega').mask('00000-000', {reverse: true});
        
        $('#register-user-content-email').mask("A", {
            translation: {
                "A": {pattern: /[\w@\-.+]/, recursive: true}
            }
        });


        verificaRetorno()

        displayNoneRegister(true)
        
         $( "#formLogin" ).validate({
        rules: {
            email: {
                required: true,
                email:true
            },
            senha: {
                required:true,
                minlength:6
            }
        },
        messages:{
            email: {
                required: "Invalido",
                email: "email invalido"
            },
            senha: {
                required:"Invalido",
                minlength:"Minimo de 6 digitos "
            }
        }
        });

        $( "#formCadastrar" ).validate({
        rules: {
            nome_usuario:{
                required: true,
                minlength:5
            },
            email_usuario:{
                required:true,
                email:true
            },
            cpf_usuario:{
                required:true,
                minlength:14
            },
            senha_usuario:{
                required:true,
                minlength:6
            },
            confirmaSenha_usuario:{
                equalTo:"#register-user-content-passw"
            },
            rua:{
                required:true
            },
            numero:{
                required:true,
                digits:true
            },
            bairro:{
                required:true,
                minlength:6
            },
            cep: {
                minlength:9
                
            }
        },
        messages:{
            nome_usuario:{
                required: "Invalido",
                minlength:"Minimo de 5 digitos "
            },
            email_usuario:{
                required:"Invalido",
                email:"Invalido"
            },
            cpf_usuario:{
                required:"Invalido",
                minlength:"Cpf Invalido",
            },
            senha_usuario:{
                required:"Invalido",
                minlength:"Minimo de 6 digitos"
            },
            confirmaSenha_usuario:{
                equalTo:"Senha Diferente"
            },
            rua:{
                required:"Invalido"
            },
            numero:{
                required:"Invalido",
                digits: "Apenas numeros"
            },
            bairro:{
                required:"Invalido",
                minlength:"Minimo de 6 digitos"
            },
            cep:{
                minlength:"Invalido"
            }
        }
        });
        
        $(document).ready(function() {

            function limpa_formulário_cep() {
                // Limpa valores do formulário de cep.
                $("#register-user-content-street").val("");
                $("#register-user-content-neighborhood").val("");
                $("#register-user-content-street-entrega").val("");
                $("#register-user-content-neighborhood-entrega").val("");
            }
            
            //Quando o campo cep perde o foco.
            $("#register-user-content-zip").blur(function() {

                //Nova variável "cep" somente com dígitos.
                var cep = $(this).val().replace(/\D/g, '');

                //Verifica se campo cep possui valor informado.
                if (cep != "") {

                    //Expressão regular para validar o CEP.
                    var validacep = /^[0-9]{8}$/;

                    //Valida o formato do CEP.
                    if(validacep.test(cep)) {

                        //Preenche os campos com "..." enquanto consulta webservice.
                        $("#register-user-content-street").val("...");
                        $("#register-user-content-neighborhood").val("...");

                        //Consulta o webservice viacep.com.br/
                        $.getJSON("https://viacep.com.br/ws/"+ cep +"/json/?callback=?", function(dados) {

                            if (!("erro" in dados)) {
                                //Atualiza os campos com os valores da consulta.
                                $("#register-user-content-street").val(dados.logradouro);
                                $("#register-user-content-neighborhood").val(dados.bairro);
                            } //end if.
                            else {
                                //CEP pesquisado não foi encontrado.
                                limpa_formulário_cep();
                                alert("CEP não encontrado.");
                            }
                        });
                    } //end if.
                    else {
                        //cep é inválido.
                        limpa_formulário_cep();
                        alert("Formato de CEP inválido.");
                    }
                } //end if.
                else {
                    //cep sem valor, limpa formulário.
                    limpa_formulário_cep();
                }
            });
            
            $("#register-user-content-zip-entrega").blur(function() {

                //Nova variável "cep" somente com dígitos.
                var cep = $(this).val().replace(/\D/g, '');

                //Verifica se campo cep possui valor informado.
                if (cep != "") {

                    //Expressão regular para validar o CEP.
                    var validacep = /^[0-9]{8}$/;

                    //Valida o formato do CEP.
                    if(validacep.test(cep)) {

                        //Preenche os campos com "..." enquanto consulta webservice.
                        $("#register-user-content-street-entrega").val("...");
                        $("#register-user-content-neighborhood-entrega").val("...");

                        //Consulta o webservice viacep.com.br/
                        $.getJSON("https://viacep.com.br/ws/"+ cep +"/json/?callback=?", function(dados) {

                            if (!("erro" in dados)) {
                                //Atualiza os campos com os valores da consulta.
                                $("#register-user-content-street-entrega").val(dados.logradouro);
                                $("#register-user-content-neighborhood-entrega").val(dados.bairro);
                            } //end if.
                            else {
                                //CEP pesquisado não foi encontrado.
                                limpa_formulário_cep();
                                alert("CEP não encontrado.");
                            }
                        });
                    } //end if.
                    else {
                        //cep é inválido.
                        limpa_formulário_cep();
                        alert("Formato de CEP inválido.");
                    }
                } //end if.
                else {
                    //cep sem valor, limpa formulário.
                    limpa_formulário_cep();
                }
            });
        });

    </script>

</html>