<!DOCTYPE html>
<html>

    <head>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
        <style>
            .foto_tabela{
                width: 100px;
                height: 100px
            }

        </style>


        <title>Produto</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div>



            <form action="/action_page.php" method="post" id="formCadastro">
                <h1>Cadastro de Produto</h1>
                <label>Nome: <input type="text" id="nome_produto"></label><br>
                <label>Quantidade: <input type="text" id="qtde_produto"></label><br>
                <label>Marca<input type="text"  id="marca_produto"></label><br>
                <label>Categoria: <input type="text" id="categoria_produto"></label><br>
                <label>Descricao: <input type="text" id="descricao_produto"></label><br>
                <label>Valor: <input type="text" id="valor_produto"></label><br>
                <label>FAQ: <input type="text" id="faq_produto"></label><br>
                <label>Cadastrar Ativo?: <input type="text" id="ativo_produto"></label><br>

                <button onclick="cadastrarProduto()">Cadastrar</button>
                <button onclick="deletarProduto()">Deletar</button> 

                <table id="table" border="1">
                    <thead>
                        <tr>
                            <th>Ativo</th>
                            <th>ID Produto</th>
                            <th>Nome Produto</th>
                            <th>Valor Produto</th>
                            <th>Ativar/Desativar</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
                <button onclick="listarProdutos(0)">Anterior</button> <button onclick="listarProdutos(1)">Pr√≥xima</button>
            </form>
        </div>



        <script>
            document.getElementById("formCadastro").addEventListener("click", function (event) {
                event.preventDefault();
            });

            function cadastrarProduto() {
                var nome_produto = document.getElementById("nome_produto").value;
                var qtde_produto = document.getElementById("qtde_produto").value;
                var marca_produto = document.getElementById("marca_produto").value;
                var categoria_produto = document.getElementById("categoria_produto").value;
                var descricao_produto = document.getElementById("descricao_produto").value;
                var valor_produto = document.getElementById("valor_produto").value;
                var faq_produto = document.getElementById("faq_produto").value;
                var ativo_produto = document.getElementById("ativo_produto").value;

                axios({
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    url: "/produto",
                    params: {
                        nomeProduto: nome_produto,
                        qtde: qtde_produto,
                        marca: marca_produto,
                        categoria: categoria_produto,
                        descricao: descricao_produto,
                        valor: valor_produto,
                        faq: faq_produto,
                        ativo: ativo_produto

                    }
                })
                        .then(function (response) {
                            console.log(response);
                        })
                        .catch(function (error) {
                            console.log(error.response)
                        });
            }

            function deletarProduto(id_produto) {
                axios({
                    method: "DELETE",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    url: "/produto",
                    params: {
                        nomeProduto: nome_produto,
                        qtde: qtde_produto,
                        marca: marca_produto,
                        categoria: categoria_produto,
                        descricao: descricao_produto,
                        valor: valor_produto,
                        faq: faq_produto
                    }
                })
                        .then(function (response) {
                            console.log(response);
                        })
                        .catch(function (error) {
                            console.log(error.response)
                        });
            }

            function listarProdutos(pagina) {
                axios({
                    method: "GET",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    url: "/produto",
                    params:{
                        pagina:pagina
                    }

                })
                        .then(
                            function (retorno) {
                                console.log(retorno)
                                $.each(retorno.data, function (key, item) {
                                    var status = "Desativar"
                                    if (item.ativo == true) {
                                        status = "Ativar"
                                    }
                                    $("#table tbody").append(
                                            "<tr>" +
                                            "<td><img src='https://www.tudoabeca.com.br/img/products/placa-de-video-nvidia-nvs295-x16-112gb-ddr3-pci-express-x16-cq295nvs-x16-dvi-pb-pny_1_600.jpg' class='foto_tabela'></td>" +
                                            "<td>" + item.idProduto + "</td>" +
                                            "<td>" + item.nomeProduto + "</td>" +
                                            "<td>" + item.valor + "</td>" +
                                            "<td><input type='button' value='" + status + "'/></td>" +
                                            "</tr>")
                                });
                            
                        })


            }
            listarProdutos()
        </script>

    </body>




</html>